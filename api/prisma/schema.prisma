generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model company {
  companyID          Int                  @id @default(autoincrement())
  companyName        String?              @db.VarChar(25)
  location           String?              @db.VarChar(55)
  contactEmail       String?              @unique(map: "contactEmail") @db.VarChar(35)
  companyLogo        Bytes?               @db.Blob
  internship         internship[]
  internship_listing internship_listing[]
}

model intern {
  internID    Int          @id @default(autoincrement())
  firstName   String?      @db.VarChar(25)
  lastName    String?      @db.VarChar(25)
  dateOfBirth DateTime?    @db.Date
  email       String?      @unique(map: "email") @db.VarChar(35)
  internship  internship[]
}

model internship {
  internshipID    Int               @id @default(autoincrement())
  internID        Int?
  managerID       Int?
  companyID       Int?
  status          String?           @db.VarChar(15)
  company         company?          @relation(fields: [companyID], references: [companyID], onDelete: NoAction, onUpdate: NoAction, map: "fk_company")
  intern          intern?           @relation(fields: [internID], references: [internID], onDelete: NoAction, onUpdate: NoAction, map: "fk_internID")
  manager         manager?          @relation(fields: [managerID], references: [managerID], onDelete: NoAction, onUpdate: NoAction, map: "fk_managerID")
  internship_days internship_days[]

  @@index([internID], map: "fk_internID")
  @@index([managerID], map: "fk_managerID")
  @@index([companyID], map: "fk_companyID_idx")
}

model internship_days {
  dayID          Int         @id @default(autoincrement())
  internshipID   Int?
  workdayDate    DateTime?   @db.Date
  dayDescription String?     @db.Text
  internship     internship? @relation(fields: [internshipID], references: [internshipID], onDelete: NoAction, onUpdate: NoAction, map: "fk_internshipID")

  @@index([internshipID], map: "fk_internshipID")
}

model internship_listing {
  listingID          String    @id @db.VarChar(36)
  companyID          Int?
  position           String    @db.VarChar(100)
  listingDescription String?   @db.Text
  location           String?   @db.Text
  startDate          DateTime? @db.Date
  endDate            DateTime? @db.Date
  requirements       String?   @db.Text
  noOfPlaces         Int?
  company            company?  @relation(fields: [companyID], references: [companyID], onDelete: NoAction, onUpdate: NoAction, map: "fk_companyID")

  @@index([companyID], map: "fk_companyID")
}

model manager {
  managerID   Int          @id @default(autoincrement())
  firstName   String?      @db.VarChar(25)
  lastName    String?      @db.VarChar(25)
  dateOfBirth DateTime?    @db.Date
  email       String?      @unique(map: "email") @db.VarChar(35)
  internship  internship[]
}
